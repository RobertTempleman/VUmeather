#define GENERATE_FONT_DDATA_FROM_RAW_BPP_GREYSCALE_BITMAP 0


#if GENERATE_FONT_DDATA_FROM_RAW_BPP_GREYSCALE_BITMAP == 1
unsigned char rawimage[100000];
#define NUM_CHARS_IN_IMAGE 13
#define FONT_CHAR_WIDTH 13
#define FONT_CHAR_HEIGHT 13
#define FONT_IMAGE_STRIDE 169

void generate_font_ddata_from_raw_bpp_greyscale_bitmap(){
  FILE *ri=fopen("0123456789usv.raw","rb");
  int num=fread(rawimage,1,100000,ri);
  fclose(ri);
  int indexes[NUM_CHARS_IN_IMAGE];
  FILE*r=fopen("usv_pixels.h","wb");
  fprintf(r,"unsigned char font_data[][2]={");
  int ind=0;
  for(int i=0;i<NUM_CHARS_IN_IMAGE;i++){
    bool need_comma=false;
    for(int y=0;y<FONT_CHAR_HEIGHT;y++){
      for(int x=0;x<FONT_CHAR_WIDTH;x++){
        unsigned char c=255-rawimage[x+i*FONT_CHAR_WIDTH+y*FONT_IMAGE_STRIDE];
        unsigned int cr=(c<<16)|(c<<8)|c;
        if (c>0){
          ind++;
          int yu=y;
          if (i==10){
            yu+=3;
          }
          win_pc(x+i*FONT_CHAR_WIDTH,yu+70,cr);
          fprintf(r,"{%d,%d},",x+yu*16,c);
          need_comma=true;
        }
      }
    }
    indexes[i]=ind;
  }
  fprintf(r,"}\n");
  fprintf(r,"font_char_index[%d]={\n",NUM_CHARS_IN_IMAGE);
  for(int i=0;i<NUM_CHARS_IN_IMAGE;i++){
    fprintf(r,"%d,",indexes[i]);
  }

  fclose(r);
}
#endif



#define H_TUBE2 96

unsigned char font_data[][2]={{2,10},{3,102},{4,149},{5,130},{6,41},{17,16},{18,187},{19,252},{20,182},{21,218},{22,231},{23,77},{33,141},{34,255},{35,105},{37,27},{38,226},{39,229},{40,30},{48,19},{49,230},{50,233},{51,16},{54,147},{55,255},{56,115},{64,72},{65,255},{66,203},{67,3},{70,108},{71,255},{72,171},{80,103},{81,255},{82,185},{86,89},{87,255},{88,198},{89,4},{96,114},{97,255},{98,178},{102,81},{103,255},{104,207},{105,6},{112,110},{113,255},{114,181},{118,86},{119,255},{120,203},{121,4},{128,88},{129,255},{130,194},{131,2},{134,98},{135,255},{136,183},{137,1},{144,39},{145,250},{146,225},{147,10},{150,130},{151,255},{152,137},{160,1},{161,181},{162,255},{163,67},{166,199},{167,250},{168,50},{177,50},{178,229},{179,218},{180,93},{181,145},{182,255},{183,131},{194,54},{195,177},{196,213},{197,202},{198,106},{4,28},{5,75},{6,4},{17,28},{18,93},{19,146},{20,222},{21,223},{22,10},{33,94},{34,224},{35,237},{36,255},{37,216},{38,10},{49,5},{50,14},{51,30},{52,238},{53,219},{54,10},{67,11},{68,236},{69,219},{70,10},{83,16},{84,236},{85,220},{86,11},{99,16},{100,236},{101,219},{102,10},{115,16},{116,236},{117,219},{118,10},{131,16},{132,236},{133,220},{134,10},{147,14},{148,236},{149,219},{150,10},{163,2},{164,236},{165,218},{177,21},{178,136},{179,161},{180,255},{181,255},{182,152},{183,139},{184,38},{193,27},{194,174},{195,178},{196,163},{197,165},{198,178},{199,180},{200,49},{2,27},{3,114},{4,150},{5,132},{6,63},{17,57},{18,218},{19,214},{20,186},{21,230},{22,253},{23,133},{32,7},{33,211},{34,168},{35,4},{37,30},{38,222},{39,255},{40,64},{48,34},{49,255},{50,198},{51,58},{54,168},{55,255},{56,117},{64,24},{65,234},{66,255},{67,165},{69,2},{70,203},{71,255},{72,105},{81,104},{82,182},{83,72},{85,75},{86,255},{87,234},{88,35},{100,23},{101,213},{102,255},{103,107},{115,7},{116,183},{117,255},{118,127},{130,1},{131,164},{132,252},{133,103},{135,48},{136,53},{146,138},{147,221},{148,61},{151,187},{152,148},{161,101},{162,255},{163,152},{164,73},{165,73},{166,95},{167,241},{168,121},{176,67},{177,255},{178,255},{179,255},{180,255},{181,255},{182,255},{183,255},{184,103},{192,78},{193,166},{194,164},{195,165},{196,164},{197,166},{198,164},{199,164},{200,54},{2,27},{3,117},{4,151},{5,135},{6,62},{17,45},{18,213},{19,209},{20,175},{21,221},{22,250},{23,119},{33,159},{34,255},{35,70},{37,26},{38,228},{39,250},{40,42},{49,176},{50,255},{51,158},{54,184},{55,255},{56,82},{65,69},{66,166},{67,64},{70,202},{71,255},{72,54},{82,2},{83,65},{84,80},{85,139},{86,240},{87,137},{88,2},{98,33},{99,222},{100,224},{101,247},{102,235},{103,83},{115,13},{116,15},{117,42},{118,213},{119,243},{120,67},{128,4},{129,133},{130,171},{131,31},{134,134},{135,255},{136,165},{144,43},{145,255},{146,255},{147,104},{150,117},{151,255},{152,182},{160,36},{161,255},{162,207},{163,23},{166,161},{167,255},{168,145},{176,2},{177,172},{178,223},{179,103},{180,76},{181,131},{182,255},{183,215},{184,36},{193,12},{194,131},{195,200},{196,210},{197,209},{198,146},{199,34},{5,5},{6,81},{7,14},{21,127},{22,255},{23,43},{36,63},{37,241},{38,248},{39,41},{51,9},{52,206},{53,255},{54,238},{55,41},{67,144},{68,225},{69,215},{70,246},{71,41},{82,77},{83,255},{84,76},{85,188},{86,255},{87,41},{97,27},{98,230},{99,145},{101,199},{102,255},{103,41},{112,3},{113,172},{114,203},{117,197},{118,255},{119,28},{128,84},{129,255},{130,191},{131,146},{132,151},{133,226},{134,255},{135,166},{136,138},{137,9},{144,72},{145,176},{146,184},{147,191},{148,191},{149,234},{150,255},{151,199},{152,176},{153,11},{165,198},{166,255},{167,27},{179,60},{180,147},{181,245},{182,255},{183,172},{184,81},{195,79},{196,180},{197,166},{198,164},{199,177},{200,106},{1,9},{2,121},{3,91},{4,55},{5,38},{6,62},{7,121},{8,20},{17,19},{18,255},{19,255},{20,255},{21,252},{22,255},{23,216},{24,15},{33,31},{34,229},{35,197},{36,215},{37,214},{38,164},{39,38},{49,50},{50,210},{51,5},{65,66},{66,206},{67,79},{68,106},{69,89},{70,30},{81,86},{82,255},{83,232},{84,224},{85,255},{86,230},{87,97},{97,187},{98,209},{99,38},{100,11},{101,82},{102,237},{103,248},{104,61},{113,101},{114,74},{118,162},{119,255},{120,147},{128,3},{129,128},{130,177},{131,39},{134,126},{135,255},{136,173},{144,29},{145,250},{146,255},{147,107},{150,136},{151,255},{152,158},{160,23},{161,246},{162,207},{163,23},{165,1},{166,200},{167,255},{168,90},{176,1},{177,150},{178,228},{179,110},{180,91},{181,174},{182,255},{183,170},{184,6},{193,6},{194,127},{195,207},{196,214},{197,198},{198,115},{199,7},{3,26},{4,113},{5,151},{6,121},{7,34},{18,65},{19,221},{20,230},{21,177},{22,235},{23,220},{24,51},{33,36},{34,228},{35,225},{36,35},{38,222},{39,255},{40,138},{49,152},{50,255},{51,116},{53,3},{54,196},{55,235},{56,83},{64,19},{65,230},{66,245},{67,31},{69,9},{70,17},{71,21},{80,60},{81,255},{82,224},{83,102},{84,200},{85,228},{86,188},{87,79},{96,82},{97,255},{98,243},{99,239},{100,154},{101,143},{102,245},{103,252},{104,85},{112,84},{113,255},{114,255},{115,119},{118,132},{119,255},{120,193},{121,3},{128,67},{129,255},{130,239},{131,33},{134,74},{135,255},{136,222},{137,12},{144,25},{145,237},{146,241},{147,30},{150,70},{151,255},{152,211},{153,7},{161,164},{162,255},{163,96},{166,124},{167,255},{168,144},{177,37},{178,221},{179,232},{180,103},{181,104},{182,237},{183,211},{184,29},{194,44},{195,165},{196,213},{197,211},{198,154},{199,32},{1,61},{2,118},{3,94},{4,91},{5,91},{6,91},{7,90},{8,76},{9,2},{17,147},{18,255},{19,255},{20,255},{21,255},{22,255},{23,255},{24,195},{25,3},{33,181},{34,218},{35,131},{36,129},{37,129},{38,152},{39,255},{40,86},{48,7},{49,223},{50,122},{54,129},{55,206},{56,4},{64,15},{65,201},{66,58},{69,34},{70,241},{71,98},{80,1},{81,9},{85,146},{86,232},{87,14},{100,20},{101,234},{102,159},{116,98},{117,255},{118,98},{131,1},{132,187},{133,255},{134,55},{147,39},{148,244},{149,239},{150,27},{163,95},{164,255},{165,229},{166,14},{179,113},{180,255},{181,219},{182,9},{195,52},{196,203},{197,135},{198,1},{2,7},{3,100},{4,150},{5,145},{6,85},{7,3},{17,19},{18,184},{19,226},{20,170},{21,186},{22,252},{23,172},{24,10},{33,136},{34,255},{35,46},{38,126},{39,255},{40,94},{49,192},{50,234},{51,4},{54,60},{55,255},{56,126},{65,178},{66,255},{67,155},{68,37},{69,2},{70,137},{71,252},{72,65},{81,84},{82,239},{83,255},{84,231},{85,194},{86,246},{87,118},{98,148},{99,255},{100,255},{101,255},{102,255},{103,189},{104,35},{113,105},{114,232},{115,169},{116,111},{117,192},{118,255},{119,255},{120,166},{121,1},{128,35},{129,243},{130,197},{131,2},{133,3},{134,85},{135,232},{136,222},{137,10},{144,76},{145,255},{146,131},{151,172},{152,232},{153,10},{160,47},{161,255},{162,182},{166,11},{167,217},{168,183},{169,1},{176,1},{177,152},{178,255},{179,162},{180,90},{181,101},{182,198},{183,232},{184,54},{193,4},{194,110},{195,197},{196,212},{197,209},{198,169},{199,52},{2,19},{3,108},{4,150},{5,130},{6,46},{17,41},{18,206},{19,250},{20,179},{21,217},{22,235},{23,82},{32,5},{33,193},{34,255},{35,96},{37,20},{38,210},{39,232},{40,35},{48,51},{49,255},{50,230},{51,14},{54,117},{55,255},{56,125},{64,82},{65,255},{66,215},{67,5},{70,95},{71,255},{72,177},{80,69},{81,255},{82,235},{83,27},{86,139},{87,255},{88,196},{89,4},{96,16},{97,218},{98,255},{99,169},{100,51},{101,98},{102,236},{103,255},{104,198},{105,4},{113,71},{114,218},{115,255},{116,255},{117,237},{118,197},{119,255},{120,187},{121,1},{130,19},{131,83},{132,100},{133,45},{134,96},{135,255},{136,157},{145,92},{146,161},{147,46},{150,148},{151,255},{152,92},{160,5},{161,212},{162,255},{163,143},{165,26},{166,231},{167,212},{168,12},{176,2},{177,178},{178,255},{179,157},{180,94},{181,208},{182,235},{183,64},{193,33},{194,160},{195,207},{196,212},{197,173},{198,58},{49,43},{50,72},{51,23},{53,2},{54,61},{55,69},{56,5},{65,159},{66,255},{67,89},{69,9},{70,213},{71,241},{72,21},{81,160},{82,255},{83,91},{85,8},{86,215},{87,245},{88,22},{97,159},{98,255},{99,90},{101,9},{102,212},{103,241},{104,21},{113,162},{114,255},{115,89},{117,8},{118,213},{119,241},{120,22},{129,167},{130,255},{131,88},{133,6},{134,212},{135,241},{136,22},{145,181},{146,255},{147,89},{149,9},{150,220},{151,240},{152,9},{160,4},{161,199},{162,255},{163,160},{164,47},{165,172},{166,255},{167,239},{168,112},{169,28},{176,15},{177,225},{178,253},{179,255},{180,255},{181,213},{182,209},{183,255},{184,222},{185,39},{192,47},{193,244},{194,153},{195,125},{196,123},{197,21},{198,38},{199,102},{200,29},{208,86},{209,255},{210,154},{224,78},{225,255},{226,165},{240,7},{241,73},{242,31},{2,15},{3,99},{4,151},{5,153},{6,115},{7,45},{8,89},{9,30},{17,48},{18,206},{19,255},{20,232},{21,230},{22,255},{23,245},{24,255},{25,107},{32,5},{33,195},{34,255},{35,110},{36,13},{37,12},{38,78},{39,214},{40,255},{41,158},{48,24},{49,250},{50,234},{51,6},{55,38},{56,226},{57,222},{58,9},{60,1},{64,13},{65,226},{66,255},{67,165},{68,53},{69,5},{72,95},{73,198},{74,17},{76,62},{81,115},{82,255},{83,255},{84,250},{85,201},{86,138},{87,67},{88,2},{92,32},{98,93},{99,200},{100,255},{101,255},{102,255},{103,255},{104,193},{105,59},{112,9},{113,40},{115,5},{116,58},{117,129},{118,195},{119,255},{120,255},{121,226},{122,33},{128,75},{129,238},{130,71},{134,3},{135,68},{136,214},{137,255},{138,111},{144,41},{145,255},{146,200},{147,11},{152,139},{153,255},{154,122},{160,9},{161,217},{162,255},{163,177},{164,38},{167,50},{168,215},{169,253},{170,60},{177,188},{178,255},{179,255},{180,243},{181,179},{182,180},{183,255},{184,255},{185,131},{193,103},{194,114},{195,75},{196,172},{197,213},{198,213},{199,175},{200,88},{48,6},{49,6},{50,7},{51,7},{53,6},{54,7},{55,7},{56,5},{64,213},{65,204},{66,205},{67,190},{68,15},{69,171},{70,206},{71,207},{72,176},{73,4},{80,171},{81,255},{82,239},{83,104},{84,7},{85,88},{86,228},{87,240},{88,105},{89,2},{96,9},{97,220},{98,241},{99,45},{101,20},{102,236},{103,141},{113,139},{114,255},{115,148},{117,117},{118,255},{119,47},{129,51},{130,253},{131,224},{132,21},{133,204},{134,192},{145,1},{146,188},{147,255},{148,164},{149,245},{150,87},{162,90},{163,255},{164,255},{165,210},{166,9},{178,13},{179,224},{180,255},{181,123},{195,98},{196,162},{197,29}};
int font_char_index[14]={0,88,152,239,326,399,489,583,652,747,843,930,1044,1109};





void drawit(){
  draw_tube(0  ,0  ,64,64,0);
  draw_tube(64 ,0  ,64,64,1);
  draw_tube(0  ,H_TUBE2 ,64,64,2);
  draw_tube(64 ,H_TUBE2 ,64,64,3);
#if GENERATE_FONT_DDATA_FROM_RAW_BPP_GREYSCALE_BITMAP == 1
  generate_font_ddata_from_raw_bpp_greyscale_bitmap();
#endif
  for(int i=0;i<13;i++){
    for(int j=font_char_index[i];j<font_char_index[i+1];j++){
      unsigned char p=font_data[j][0];
      unsigned char x=p&15;
      unsigned char y=p>>4;
      unsigned char col=font_data[j][1];
      win_pc(i*10+(int)x,70+(int)y,col|(col<<8)|(col<<16));
    }
  }
}


