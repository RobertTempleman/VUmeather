Version 4
SHEET 1 6068 1612
WIRE 224 -2400 96 -2400
WIRE 336 -2400 224 -2400
WIRE 448 -2400 336 -2400
WIRE 512 -2400 448 -2400
WIRE 576 -2400 512 -2400
WIRE 688 -2400 576 -2400
WIRE 736 -2400 688 -2400
WIRE 816 -2400 736 -2400
WIRE 864 -2400 816 -2400
WIRE 912 -2400 864 -2400
WIRE 336 -2384 336 -2400
WIRE -80 -2352 -192 -2352
WIRE -64 -2352 -80 -2352
WIRE -192 -2336 -192 -2352
WIRE -80 -2336 -80 -2352
WIRE 96 -2336 96 -2400
WIRE 224 -2336 224 -2400
WIRE 816 -2320 816 -2400
WIRE 864 -2320 864 -2400
WIRE 512 -2304 512 -2400
WIRE 576 -2304 576 -2400
WIRE 336 -2288 336 -2304
WIRE 688 -2272 688 -2400
WIRE 736 -2272 736 -2400
WIRE -192 -2240 -192 -2272
WIRE -80 -2240 -80 -2256
WIRE -80 -2240 -192 -2240
WIRE -32 -2240 -80 -2240
WIRE 448 -2240 448 -2400
WIRE -80 -2224 -80 -2240
WIRE -32 -2224 -32 -2240
WIRE -192 -2208 -192 -2240
WIRE 224 -2192 224 -2256
WIRE 288 -2192 224 -2192
WIRE 512 -2160 512 -2224
WIRE 576 -2160 576 -2224
WIRE 576 -2160 512 -2160
WIRE 592 -2160 576 -2160
WIRE 688 -2160 688 -2208
WIRE 688 -2160 672 -2160
WIRE 736 -2160 736 -2208
WIRE 736 -2160 688 -2160
WIRE 816 -2160 816 -2256
WIRE 816 -2160 736 -2160
WIRE 864 -2160 864 -2256
WIRE 864 -2160 816 -2160
WIRE 944 -2160 864 -2160
WIRE 1040 -2160 1024 -2160
WIRE 1056 -2160 1040 -2160
WIRE 1152 -2160 1136 -2160
WIRE 224 -2144 224 -2192
WIRE -192 -2128 -192 -2144
WIRE -80 -2128 -80 -2144
WIRE -80 -2128 -192 -2128
WIRE -48 -2128 -80 -2128
WIRE 576 -2128 576 -2160
WIRE 592 -2128 576 -2128
WIRE -192 -2112 -192 -2128
WIRE -80 -2112 -80 -2128
WIRE 576 -2112 576 -2128
WIRE 1264 -2112 1264 -2128
WIRE 160 -2096 144 -2096
WIRE 1040 -2048 1040 -2160
WIRE 1072 -2048 1040 -2048
WIRE 448 -2032 448 -2160
WIRE 528 -2032 448 -2032
WIRE 1152 -2032 1152 -2160
WIRE 1152 -2032 1136 -2032
WIRE 1184 -2032 1152 -2032
WIRE 1264 -2032 1264 -2048
WIRE 1376 -2032 1264 -2032
WIRE -192 -2016 -192 -2048
WIRE -80 -2016 -80 -2032
WIRE -80 -2016 -192 -2016
WIRE -64 -2016 -80 -2016
WIRE 448 -2016 448 -2032
WIRE 912 -2016 912 -2400
WIRE 1072 -2016 912 -2016
WIRE 1264 -2000 1264 -2032
WIRE 144 -1984 144 -2016
WIRE 288 -1968 288 -2192
WIRE 384 -1968 288 -1968
WIRE 576 -1968 576 -2016
WIRE 656 -1968 656 -2128
WIRE 656 -1968 576 -1968
WIRE 96 -1904 96 -2272
WIRE 144 -1904 96 -1904
WIRE 224 -1904 224 -2048
WIRE 224 -1904 144 -1904
WIRE 448 -1904 448 -1920
WIRE 448 -1904 224 -1904
WIRE 576 -1904 576 -1968
WIRE 576 -1904 448 -1904
WIRE 608 -1904 576 -1904
WIRE 1264 -1904 1264 -1920
FLAG 608 -1904 -
IOPIN 608 -1904 BiDir
FLAG -48 -2128 -
IOPIN -48 -2128 BiDir
FLAG -64 -2352 +
IOPIN -64 -2352 BiDir
FLAG -32 -2224 0
FLAG 336 -2288 0
FLAG -64 -2016 VL+
IOPIN -64 -2016 BiDir
FLAG 1104 -2064 +
IOPIN 1104 -2064 BiDir
FLAG 1104 -2000 -
IOPIN 1104 -2000 BiDir
FLAG 1264 -1904 -
IOPIN 1264 -1904 BiDir
FLAG 1264 -2128 VL+
IOPIN 1264 -2128 BiDir
SYMBOL Misc\\EuropeanCap 80 -2336 R0
SYMATTR InstName C3
SYMATTR Value 47000µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL ind 560 -2320 R0
SYMATTR InstName L1
SYMATTR Value 400µH
SYMATTR SpiceLine Rser=.5 Cpar=1n
SYMBOL Misc\\EuropeanResistor 496 -2208 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R1
SYMATTR Value 270
SYMBOL Misc\\EuropeanResistor 576 -2176 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 8 53 VTop 2
SYMATTR InstName R2
SYMATTR Value 680
SYMBOL diode 672 -2272 R0
WINDOW 3 81 32 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D1
SYMBOL diode 832 -2256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 36 31 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL Misc\\EuropeanResistor 320 -2288 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL nmos 528 -2112 R0
WINDOW 0 -21 44 Left 2
WINDOW 3 20 31 Left 2
SYMATTR InstName M1
SYMATTR Value IRF740
SYMBOL voltage 144 -2000 M0
WINDOW 0 -141 53 Left 2
WINDOW 3 -134 119 Invisible 2
SYMATTR InstName Arduino_drive
SYMATTR Value PULSE(0 4 .01 0 0 .00025 .1 1000)
SYMATTR SpiceLine Rser=0
SYMBOL voltage -80 -2240 M0
WINDOW 123 0 0 Left 2
WINDOW 39 -63 34 Left 2
WINDOW 0 -53 60 Left 2
WINDOW 3 -15 62 Left 2
SYMATTR SpiceLine Rser=2
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL voltage -80 -2352 M0
WINDOW 123 0 0 Left 2
WINDOW 39 -61 27 Left 2
WINDOW 0 -54 49 Left 2
WINDOW 3 -9 55 Left 2
SYMATTR SpiceLine Rser=100
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL voltage -80 -2016 M180
WINDOW 123 0 0 Left 2
WINDOW 39 13 78 Left 2
WINDOW 0 37 57 Left 2
WINDOW 3 -3 60 Left 2
SYMATTR SpiceLine Rser=5
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL npn3 160 -2144 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL Misc\\EuropeanResistor 208 -2240 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R4
SYMATTR Value 2k2
SYMBOL Misc\\EuropeanResistor 128 -2000 M180
WINDOW 0 -24 74 Left 2
WINDOW 3 -19 34 Left 2
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL diode 880 -2256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 84 31 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL diode 720 -2272 R0
WINDOW 3 33 32 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D5
SYMBOL Misc\\EuropeanCap -208 -2208 R0
SYMATTR InstName C1
SYMATTR Value 4700µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL Misc\\EuropeanCap -208 -2336 R0
SYMATTR InstName C2
SYMATTR Value 100µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL Misc\\EuropeanCap -208 -2112 R0
SYMATTR InstName C4
SYMATTR Value 100µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL Opamps\\opamp2 1104 -2096 R0
WINDOW 3 -32 63 Left 2
SYMATTR Value lm318
SYMATTR InstName U3
SYMBOL Misc\\EuropeanResistor 928 -2144 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL Misc\\EuropeanResistor 1040 -2144 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 100k
SYMBOL Misc\\EuropeanResistor 1168 -2016 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R18
SYMATTR Value 5k6
SYMBOL Misc\\EuropeanResistor 1248 -1904 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R19
SYMATTR Value 3k3
SYMBOL schottky 1280 -2048 R180
WINDOW 0 24 64 Left 2
WINDOW 3 36 36 Left 2
SYMATTR InstName D6
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL npn3 384 -2016 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL diode 656 -2144 R90
WINDOW 0 44 -15 VBottom 2
WINDOW 3 6 -49 VTop 2
SYMATTR InstName D3
SYMATTR Value 1SR156-400
SYMATTR Description Zener Diode
SYMATTR Type zener
SYMBOL Misc\\EuropeanResistor 432 -2144 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R5
SYMATTR Value 2k2
TEXT -216 -2000 Left 2 !.tran 0 .0105 .00999
TEXT -184 -1976 Left 2 !.lib NE5532.sub
TEXT -184 -1952 Left 2 !.lib LM318.sub
