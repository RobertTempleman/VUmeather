Version 4
SHEET 1 4676 1612
WIRE 0 -2400 -16 -2400
WIRE 96 -2400 80 -2400
WIRE 224 -2400 96 -2400
WIRE 384 -2400 224 -2400
WIRE 448 -2400 384 -2400
WIRE 512 -2400 448 -2400
WIRE 624 -2400 512 -2400
WIRE 672 -2400 624 -2400
WIRE 752 -2400 672 -2400
WIRE 784 -2400 752 -2416
WIRE 784 -2400 752 -2400
WIRE 800 -2400 784 -2400
WIRE 1136 -2400 800 -2400
WIRE 800 -2352 800 -2400
WIRE 816 -2352 800 -2352
WIRE 912 -2352 896 -2352
WIRE 928 -2352 912 -2352
WIRE 1024 -2352 1008 -2352
WIRE 1040 -2352 1024 -2352
WIRE 1152 -2352 1120 -2352
WIRE 1168 -2352 1152 -2352
WIRE 1264 -2352 1248 -2352
WIRE 96 -2336 96 -2400
WIRE 224 -2336 224 -2400
WIRE 1344 -2336 1344 -2352
WIRE -16 -2320 -16 -2336
WIRE -16 -2320 -128 -2320
WIRE 752 -2320 752 -2400
WIRE 800 -2320 800 -2352
WIRE -128 -2304 -128 -2320
WIRE -16 -2304 -16 -2320
WIRE 448 -2304 448 -2400
WIRE 512 -2304 512 -2400
WIRE 624 -2272 624 -2400
WIRE 672 -2272 672 -2400
WIRE 1152 -2272 1152 -2352
WIRE 1168 -2272 1152 -2272
WIRE 1264 -2256 1264 -2352
WIRE 1264 -2256 1232 -2256
WIRE 1344 -2256 1344 -2272
WIRE 1456 -2256 1344 -2256
WIRE 384 -2240 384 -2400
WIRE 912 -2240 912 -2352
WIRE 944 -2240 912 -2240
WIRE 1136 -2240 1136 -2400
WIRE 1168 -2240 1136 -2240
WIRE 1024 -2224 1024 -2352
WIRE 1024 -2224 1008 -2224
WIRE 1344 -2224 1344 -2256
WIRE -128 -2208 -128 -2240
WIRE -16 -2208 -16 -2224
WIRE -16 -2208 -128 -2208
WIRE 32 -2208 -16 -2208
WIRE 752 -2208 752 -2256
WIRE 800 -2208 800 -2256
WIRE 800 -2208 752 -2208
WIRE 944 -2208 800 -2208
WIRE -16 -2192 -16 -2208
WIRE 32 -2192 32 -2208
WIRE 224 -2192 224 -2256
WIRE 240 -2192 224 -2192
WIRE -128 -2176 -128 -2208
WIRE 448 -2160 448 -2224
WIRE 512 -2160 512 -2224
WIRE 512 -2160 448 -2160
WIRE 528 -2160 512 -2160
WIRE 624 -2160 624 -2208
WIRE 624 -2160 608 -2160
WIRE 672 -2160 672 -2208
WIRE 672 -2160 624 -2160
WIRE 752 -2160 752 -2208
WIRE 752 -2160 784 -2176
WIRE 752 -2160 672 -2160
WIRE 224 -2144 224 -2192
WIRE 1344 -2128 1344 -2144
WIRE 512 -2112 512 -2160
WIRE -128 -2096 -128 -2112
WIRE -16 -2096 -16 -2112
WIRE -16 -2096 -128 -2096
WIRE 16 -2096 -16 -2096
WIRE 160 -2096 144 -2096
WIRE -128 -2080 -128 -2096
WIRE -16 -2080 -16 -2096
WIRE 384 -2032 384 -2144
WIRE 464 -2032 384 -2032
WIRE 384 -2016 384 -2032
WIRE 144 -2000 144 -2016
WIRE 176 -2000 144 -2000
WIRE -128 -1984 -128 -2016
WIRE -16 -1984 -16 -2000
WIRE -16 -1984 -128 -1984
WIRE -16 -1968 -16 -1984
WIRE 96 -1920 96 -2272
WIRE 144 -1920 96 -1920
WIRE 224 -1920 224 -2048
WIRE 224 -1920 144 -1920
WIRE 384 -1920 384 -1936
WIRE 384 -1920 224 -1920
WIRE 512 -1920 512 -2016
WIRE 512 -1920 384 -1920
WIRE 544 -1920 512 -1920
FLAG 544 -1920 -
IOPIN 544 -1920 BiDir
FLAG 16 -2096 -
IOPIN 16 -2096 BiDir
FLAG -16 -2336 +
IOPIN -16 -2336 BiDir
FLAG 32 -2192 0
FLAG -16 -2400 0
FLAG -16 -1968 VL+
IOPIN -16 -1968 BiDir
FLAG 784 -2176 sense-
FLAG 752 -2416 sense+
FLAG 176 -2000 Varduino_drive
FLAG 976 -2256 +
IOPIN 976 -2256 BiDir
FLAG 976 -2192 -
IOPIN 976 -2192 BiDir
FLAG 1200 -2288 +
IOPIN 1200 -2288 BiDir
FLAG 1200 -2224 -
IOPIN 1200 -2224 BiDir
FLAG 1344 -2128 -
IOPIN 1344 -2128 BiDir
FLAG 1344 -2352 VL+
IOPIN 1344 -2352 BiDir
SYMBOL Misc\\EuropeanCap 80 -2336 R0
SYMATTR InstName C3
SYMATTR Value 4700µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL ind 496 -2320 R0
SYMATTR InstName L1
SYMATTR Value 400µH
SYMBOL Misc\\EuropeanResistor 432 -2208 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R1
SYMATTR Value 200
SYMBOL Misc\\EuropeanResistor 512 -2176 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 200
SYMBOL diode 608 -2272 R0
WINDOW 3 81 32 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D1
SYMBOL diode 768 -2256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 36 31 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL Misc\\EuropeanResistor -16 -2416 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 4.7
SYMBOL nmos 464 -2112 R0
SYMATTR InstName M1
SYMATTR Value IRF740
SYMBOL voltage 144 -2016 M0
WINDOW 0 -141 53 Left 2
WINDOW 3 -134 119 Invisible 2
SYMATTR InstName Arduino_drive
SYMATTR Value PULSE(0 4 .01 0 0 .00025 .1 1000)
SYMATTR SpiceLine Rser=0
SYMBOL voltage -16 -2208 M0
WINDOW 123 0 0 Left 2
WINDOW 39 -63 34 Left 2
WINDOW 0 -53 60 Left 2
WINDOW 3 -15 62 Left 2
SYMATTR SpiceLine Rser=2
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL voltage -16 -2320 M0
WINDOW 123 0 0 Left 2
WINDOW 39 -61 27 Left 2
WINDOW 0 -54 49 Left 2
WINDOW 3 -9 55 Left 2
SYMATTR SpiceLine Rser=100
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL voltage -16 -1984 M180
WINDOW 123 0 0 Left 2
WINDOW 39 13 78 Left 2
WINDOW 0 37 57 Left 2
WINDOW 3 -3 60 Left 2
SYMATTR SpiceLine Rser=5
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL npn3 160 -2144 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL Misc\\EuropeanResistor 208 -2240 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R4
SYMATTR Value 4k7
SYMBOL pnp2 320 -2240 R0
WINDOW 0 29 -14 Left 2
WINDOW 3 39 47 Left 2
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL Misc\\EuropeanResistor 368 -1920 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R8
SYMATTR Value 4k7
SYMBOL Misc\\EuropeanResistor 128 -2000 M180
WINDOW 0 -24 74 Left 2
WINDOW 3 -19 34 Left 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 224 -2208 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 470
SYMBOL diode 816 -2256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 84 31 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL diode 656 -2272 R0
WINDOW 3 33 32 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D5
SYMBOL Misc\\EuropeanCap -144 -2176 R0
SYMATTR InstName C1
SYMATTR Value 4700µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL Misc\\EuropeanCap -144 -2304 R0
SYMATTR InstName C2
SYMATTR Value 100µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL Misc\\EuropeanCap -144 -2080 R0
SYMATTR InstName C4
SYMATTR Value 100µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL Opamps\\opamp2 976 -2288 R0
WINDOW 3 -32 63 Left 2
SYMATTR Value ne5532
SYMATTR InstName U3
SYMBOL Misc\\EuropeanResistor 1152 -2336 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 800 -2336 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 470
SYMBOL Opamps\\opamp2 1200 -2320 R0
WINDOW 3 -32 63 Left 2
SYMATTR Value ne5532
SYMATTR InstName U4
SYMBOL Misc\\EuropeanResistor 1024 -2368 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 470
SYMBOL Misc\\EuropeanResistor 912 -2336 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 1248 -2240 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R18
SYMATTR Value 3k3
SYMBOL Misc\\EuropeanResistor 1328 -2128 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R19
SYMATTR Value 2k2
SYMBOL schottky 1360 -2272 R180
WINDOW 0 24 64 Left 2
WINDOW 3 36 36 Left 2
SYMATTR InstName D6
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
TEXT 600 -2072 Left 2 !.tran 0 .0105 .00999
TEXT 600 -2040 Left 2 !.lib NE5532.sub
TEXT 592 -2008 Left 2 !.lib LM318.sub
