Version 4
SHEET 1 4676 1612
WIRE 1216 -2432 832 -2432
WIRE 0 -2400 -16 -2400
WIRE 96 -2400 80 -2400
WIRE 224 -2400 96 -2400
WIRE 384 -2400 224 -2400
WIRE 448 -2400 384 -2400
WIRE 512 -2400 448 -2400
WIRE 624 -2400 512 -2400
WIRE 672 -2400 624 -2400
WIRE 752 -2400 672 -2400
WIRE 784 -2400 752 -2416
WIRE 784 -2400 752 -2400
WIRE 800 -2400 784 -2400
WIRE 832 -2400 832 -2432
WIRE 832 -2400 800 -2400
WIRE 848 -2400 832 -2400
WIRE 944 -2400 928 -2400
WIRE 976 -2400 944 -2400
WIRE 1088 -2400 1056 -2400
WIRE 1120 -2400 1088 -2400
WIRE 1232 -2400 1200 -2400
WIRE 1264 -2400 1232 -2400
WIRE 1360 -2400 1344 -2400
WIRE 752 -2352 752 -2400
WIRE 800 -2352 800 -2400
WIRE 96 -2336 96 -2400
WIRE 224 -2336 224 -2400
WIRE 1600 -2336 1600 -2368
WIRE 1712 -2336 1600 -2336
WIRE -16 -2320 -16 -2336
WIRE -16 -2320 -128 -2320
WIRE 1232 -2320 1232 -2400
WIRE 1248 -2320 1232 -2320
WIRE 1600 -2320 1600 -2336
WIRE -128 -2304 -128 -2320
WIRE -16 -2304 -16 -2320
WIRE 448 -2304 448 -2400
WIRE 512 -2304 512 -2400
WIRE 1360 -2304 1360 -2400
WIRE 1360 -2304 1408 -2320
WIRE 1360 -2304 1312 -2304
WIRE 944 -2288 944 -2400
WIRE 992 -2288 944 -2288
WIRE 1216 -2288 1216 -2432
WIRE 1248 -2288 1216 -2288
WIRE 624 -2272 624 -2400
WIRE 672 -2272 672 -2400
WIRE 1088 -2272 1088 -2400
WIRE 1088 -2272 1136 -2288
WIRE 1088 -2272 1056 -2272
WIRE 752 -2256 752 -2288
WIRE 800 -2256 800 -2288
WIRE 800 -2256 752 -2256
WIRE 992 -2256 800 -2256
WIRE 384 -2240 384 -2400
WIRE 1360 -2240 1360 -2304
WIRE 1600 -2240 1600 -2256
WIRE 1600 -2240 1440 -2240
WIRE 1696 -2240 1712 -2272
WIRE 1696 -2240 1600 -2240
WIRE 1712 -2240 1696 -2240
WIRE -128 -2208 -128 -2240
WIRE -16 -2208 -16 -2224
WIRE -16 -2208 -128 -2208
WIRE 32 -2208 -16 -2208
WIRE 1600 -2208 1600 -2240
WIRE -16 -2192 -16 -2208
WIRE 32 -2192 32 -2208
WIRE 224 -2192 224 -2256
WIRE 240 -2192 224 -2192
WIRE -128 -2176 -128 -2208
WIRE 448 -2160 448 -2224
WIRE 512 -2160 512 -2224
WIRE 512 -2160 448 -2160
WIRE 528 -2160 512 -2160
WIRE 624 -2160 624 -2208
WIRE 624 -2160 608 -2160
WIRE 672 -2160 672 -2208
WIRE 672 -2160 624 -2160
WIRE 752 -2160 752 -2256
WIRE 752 -2160 784 -2176
WIRE 752 -2160 672 -2160
WIRE 224 -2144 224 -2192
WIRE 512 -2112 512 -2160
WIRE 1600 -2112 1600 -2128
WIRE 1712 -2112 1600 -2112
WIRE -128 -2096 -128 -2112
WIRE -16 -2096 -16 -2112
WIRE -16 -2096 -128 -2096
WIRE 16 -2096 -16 -2096
WIRE 160 -2096 144 -2096
WIRE 1600 -2096 1600 -2112
WIRE -128 -2080 -128 -2096
WIRE -16 -2080 -16 -2096
WIRE 384 -2032 384 -2144
WIRE 464 -2032 384 -2032
WIRE 384 -2016 384 -2032
WIRE 144 -2000 144 -2016
WIRE 176 -2000 144 -2000
WIRE -128 -1984 -128 -2016
WIRE -16 -1984 -16 -2000
WIRE -16 -1984 -128 -1984
WIRE -16 -1968 -16 -1984
WIRE 96 -1920 96 -2272
WIRE 144 -1920 96 -1920
WIRE 224 -1920 224 -2048
WIRE 224 -1920 144 -1920
WIRE 384 -1920 384 -1936
WIRE 384 -1920 224 -1920
WIRE 512 -1920 512 -2016
WIRE 512 -1920 384 -1920
WIRE 544 -1920 512 -1920
FLAG 544 -1920 -
IOPIN 544 -1920 BiDir
FLAG 16 -2096 -
IOPIN 16 -2096 BiDir
FLAG -16 -2336 +
IOPIN -16 -2336 BiDir
FLAG 32 -2192 0
FLAG -16 -2400 0
FLAG -16 -1968 VL+
IOPIN -16 -1968 BiDir
FLAG 1024 -2304 +
IOPIN 1024 -2304 BiDir
FLAG 1024 -2240 -
IOPIN 1024 -2240 BiDir
FLAG 1280 -2336 +
IOPIN 1280 -2336 BiDir
FLAG 1280 -2272 -
IOPIN 1280 -2272 BiDir
FLAG 1600 -2096 -
IOPIN 1600 -2096 BiDir
FLAG 1600 -2368 VL+
IOPIN 1600 -2368 BiDir
FLAG 784 -2176 sense-
FLAG 752 -2416 sense+
FLAG 1408 -2320 Vdecay.400
FLAG 1712 -2272 VdecayADC
FLAG 176 -2000 Varduino_drive
FLAG 1136 -2288 Vdecay.20
SYMBOL Misc\\EuropeanCap 80 -2336 R0
SYMATTR InstName C3
SYMATTR Value 4700µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL ind 496 -2320 R0
SYMATTR InstName L1
SYMATTR Value 400µH
SYMBOL Misc\\EuropeanResistor 432 -2208 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R1
SYMATTR Value 200
SYMBOL Misc\\EuropeanResistor 512 -2176 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 200
SYMBOL diode 608 -2272 R0
WINDOW 3 81 32 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D1
SYMBOL diode 768 -2288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 36 31 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL Misc\\EuropeanResistor -16 -2416 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 4.7
SYMBOL nmos 464 -2112 R0
SYMATTR InstName M1
SYMATTR Value IRF740
SYMBOL voltage 144 -2016 M0
WINDOW 0 -141 53 Left 2
WINDOW 3 -134 119 Invisible 2
SYMATTR InstName Arduino_drive
SYMATTR Value PULSE(0 4 .01 0 0 .00025 .1 1000)
SYMATTR SpiceLine Rser=0
SYMBOL voltage -16 -2208 M0
WINDOW 123 0 0 Left 2
WINDOW 39 -63 34 Left 2
WINDOW 0 -53 60 Left 2
WINDOW 3 -15 62 Left 2
SYMATTR SpiceLine Rser=2
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL voltage -16 -2320 M0
WINDOW 123 0 0 Left 2
WINDOW 39 -61 27 Left 2
WINDOW 0 -54 49 Left 2
WINDOW 3 -9 55 Left 2
SYMATTR SpiceLine Rser=100
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL voltage -16 -1984 M180
WINDOW 123 0 0 Left 2
WINDOW 39 13 78 Left 2
WINDOW 0 37 57 Left 2
WINDOW 3 -3 60 Left 2
SYMATTR SpiceLine Rser=5
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL npn3 160 -2144 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL Misc\\EuropeanResistor 208 -2240 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R4
SYMATTR Value 4k7
SYMBOL pnp2 320 -2240 R0
WINDOW 0 29 -14 Left 2
WINDOW 3 39 47 Left 2
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL Misc\\EuropeanResistor 368 -1920 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R8
SYMATTR Value 4k7
SYMBOL Misc\\EuropeanResistor 128 -2000 M180
WINDOW 0 -24 74 Left 2
WINDOW 3 -19 34 Left 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 224 -2208 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 470
SYMBOL Opamps\\opamp2 1024 -2336 R0
WINDOW 3 -32 63 Left 2
SYMATTR Value LM318
SYMATTR InstName U2
SYMBOL Misc\\EuropeanResistor 1248 -2384 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 832 -2384 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 470
SYMBOL Opamps\\opamp2 1280 -2368 R0
WINDOW 3 -32 63 Left 2
SYMATTR Value LM318
SYMATTR InstName U1
SYMBOL Misc\\EuropeanResistor 1104 -2416 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 470
SYMBOL Misc\\EuropeanResistor 960 -2384 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 1344 -2224 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value 3k3
SYMBOL Misc\\EuropeanResistor 1584 -2112 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R10
SYMATTR Value 2k2
SYMBOL schottky 1616 -2256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 36 36 Left 2
SYMATTR InstName D3
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 816 -2288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 84 31 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL diode 656 -2272 R0
WINDOW 3 33 32 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D5
SYMBOL Misc\\EuropeanCap -144 -2176 R0
SYMATTR InstName C1
SYMATTR Value 4700µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL Misc\\EuropeanCap -144 -2304 R0
SYMATTR InstName C2
SYMATTR Value 100µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
SYMBOL Misc\\EuropeanCap -144 -2080 R0
SYMATTR InstName C4
SYMATTR Value 100µF
SYMATTR SpiceLine V=400 Irms=1 Rser=.32 Lser=0
TEXT 600 -2072 Left 2 !.tran 0 .0105 .00999
TEXT 600 -2040 Left 2 !.lib NE5532.sub
TEXT 1728 -2240 Left 2 ;to adc0820 Vin
TEXT 1728 -2336 Left 2 ;logic & ADC V+
TEXT 1728 -2112 Left 2 ;logic & ADC ground
TEXT 592 -2008 Left 2 !.lib LM318.sub
