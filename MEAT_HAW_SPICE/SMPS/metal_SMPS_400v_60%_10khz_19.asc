Version 4
SHEET 1 6068 1612
WIRE 2336 -3168 2272 -3168
WIRE 2432 -3168 2416 -3168
WIRE 1776 -3136 1728 -3136
WIRE 1856 -3136 1840 -3136
WIRE 1856 -3088 1856 -3136
WIRE 1888 -3088 1856 -3088
WIRE 2272 -3088 2272 -3168
WIRE 2304 -3088 2272 -3088
WIRE 2944 -3056 2816 -3056
WIRE 1568 -3040 1472 -3040
WIRE 1776 -3040 1728 -3040
WIRE 1856 -3040 1856 -3088
WIRE 1856 -3040 1840 -3040
WIRE 2528 -3040 2512 -3040
WIRE 2624 -3040 2592 -3040
WIRE 2704 -3040 2624 -3040
WIRE 2816 -3040 2816 -3056
WIRE 2624 -3024 2624 -3040
WIRE 2640 -3024 2624 -3024
WIRE 2816 -3008 2816 -3040
WIRE 2832 -3008 2816 -3008
WIRE 2928 -3008 2912 -3008
WIRE 2944 -3008 2944 -3056
WIRE 3040 -3008 3024 -3008
WIRE 2000 -2992 1984 -2992
WIRE 2352 -2992 2336 -2992
WIRE 2704 -2992 2704 -3040
WIRE 2752 -2992 2752 -3040
WIRE 1360 -2976 1312 -2976
WIRE 1472 -2976 1472 -3040
WIRE 1488 -2976 1472 -2976
WIRE 1360 -2960 1360 -2976
WIRE 1568 -2960 1568 -3040
WIRE 1568 -2960 1552 -2960
WIRE 1744 -2960 1568 -2960
WIRE 1888 -2960 1888 -3088
WIRE 1888 -2960 1824 -2960
WIRE 1952 -2960 1888 -2960
WIRE 2352 -2960 2032 -2960
WIRE 2848 -2960 2832 -2960
WIRE 2912 -2960 2912 -2976
WIRE 2912 -2960 2896 -2960
WIRE 2960 -2960 2944 -2960
WIRE 3024 -2960 3024 -2976
WIRE 3024 -2960 3008 -2960
WIRE 1488 -2944 1408 -2944
WIRE 1408 -2928 1408 -2944
WIRE 1952 -2928 1824 -2928
WIRE 2832 -2928 2832 -2960
WIRE 2912 -2928 2912 -2960
WIRE 2944 -2928 2944 -2960
WIRE 3024 -2928 3024 -2960
WIRE 2928 -2912 2928 -3008
WIRE 3040 -2912 3040 -3008
WIRE 2816 -2896 2816 -3008
WIRE 1616 -2880 1600 -2880
WIRE 1824 -2880 1824 -2928
WIRE 1824 -2880 1696 -2880
WIRE 1968 -2880 1968 -2896
WIRE 2000 -2880 2000 -2896
WIRE 1984 -2864 1984 -2896
WIRE 2704 -2864 2704 -2912
WIRE 2704 -2864 2560 -2864
WIRE 2320 -2832 2320 -2848
WIRE 2352 -2832 2320 -2832
WIRE 2592 -2832 2560 -2832
WIRE 2624 -2832 2592 -2832
WIRE 2592 -2816 2592 -2832
WIRE 2752 -2816 2752 -2912
WIRE 2816 -2816 2816 -2832
WIRE 2816 -2816 2752 -2816
WIRE 2928 -2816 2928 -2832
WIRE 2928 -2816 2816 -2816
WIRE 3040 -2816 3040 -2832
WIRE 3040 -2816 2928 -2816
WIRE 1408 -2800 1408 -2848
WIRE 2320 -2800 2320 -2832
WIRE 2704 -2800 2704 -2864
WIRE 2752 -2800 2752 -2816
WIRE 2592 -2736 2592 -2752
WIRE 2592 -2736 2560 -2736
WIRE 2592 -2720 2592 -2736
WIRE 2656 -2720 2624 -2720
WIRE 2320 -2704 2320 -2736
WIRE 2352 -2704 2320 -2704
WIRE 2624 -2704 2624 -2720
WIRE 2624 -2704 2560 -2704
FLAG 2752 -2800 0
FLAG 2512 -3040 0
FLAG 2432 -3168 0
FLAG 2912 -2976 0
FLAG 3024 -2976 0
FLAG 2592 -2720 0
FLAG 2320 -2704 0
FLAG 2320 -2848 VDD
IOPIN 2320 -2848 BiDir
FLAG 2704 -2704 0
FLAG 2336 -2992 0
FLAG 2656 -2880 0
FLAG 2656 -2960 VDD
IOPIN 2656 -2960 BiDir
FLAG 2592 -2880 0
FLAG 2624 -2832 +
IOPIN 2624 -2832 BiDir
FLAG 2640 -3024 +
IOPIN 2640 -3024 BiDir
FLAG 1600 -2880 0
FLAG 1968 -2880 0
FLAG 1520 -2992 +
IOPIN 1520 -2992 BiDir
FLAG 1520 -2928 -
IOPIN 1520 -2928 BiDir
FLAG 1408 -2800 0
FLAG 2000 -2880 0
FLAG 1728 -3136 hi_voltage_left
IOPIN 1728 -3136 BiDir
FLAG 1728 -3040 hi_voltage_right
IOPIN 1728 -3040 BiDir
FLAG 1984 -2864 0
FLAG 1360 -2960 0
FLAG 1312 -3056 +
IOPIN 1312 -3056 BiDir
FLAG 1312 -2896 -
IOPIN 1312 -2896 BiDir
FLAG 2000 -2992 VDD
IOPIN 2000 -2992 BiDir
SYMBOL ind2 2768 -2896 R180
WINDOW 0 36 80 Invisible 2
WINDOW 3 -16 -1 Left 2
SYMATTR InstName L2
SYMATTR Value {sec_I}
SYMATTR SpiceLine Rser=.42
SYMATTR Type ind
SYMBOL diode 2752 -3024 R270
WINDOW 0 32 32 Invisible 2
WINDOW 3 0 32 Invisible 2
SYMATTR InstName D1
SYMATTR Value RFUH60TS6D
SYMBOL Misc\\EuropeanCap 2800 -2896 R0
WINDOW 0 24 4 Invisible 2
WINDOW 3 -30 33 Left 2
SYMATTR InstName C2
SYMATTR Value 20n
SYMBOL Misc\\EuropeanResistor 3056 -2928 M0
WINDOW 0 31 40 Invisible 2
WINDOW 3 6 61 Left 2
SYMATTR InstName R2
SYMATTR Value 400
SYMBOL ind2 2688 -2896 M180
WINDOW 0 36 80 Invisible 2
WINDOW 3 -12 0 Left 2
SYMATTR InstName L3
SYMATTR Value {pri_I}
SYMATTR SpiceLine Rser=.0003
SYMATTR Type ind
SYMBOL Misc\\EuropeanCap 2528 -3056 M90
WINDOW 0 0 32 Invisible 2
WINDOW 3 -9 69 VTop 2
SYMATTR InstName C3
SYMATTR Value 3900µ
SYMATTR SpiceLine Rser=.005
SYMBOL voltage 2320 -3168 M90
WINDOW 0 -15 108 VLeft 2
WINDOW 3 -134 119 Invisible 2
WINDOW 123 0 0 Left 2
SYMATTR InstName sigma_delta3
SYMATTR Value PULSE(0 5 0 10n 10n {pulse_width*0.95} {1/freq})
SYMATTR SpiceLine Rser=0
SYMBOL sw 2928 -3008 M270
WINDOW 0 71 33 Invisible 2
SYMATTR InstName S3
SYMATTR SpiceModel SWI
SYMATTR Value ""
SYMBOL voltage 2928 -2928 R0
WINDOW 123 0 0 Left 2
WINDOW 0 24 16 Invisible 2
WINDOW 3 -14 57 Left 2
SYMATTR InstName V8
SYMATTR Value 400
SYMATTR SpiceLine Rser=0
SYMBOL voltage 2816 -2928 M90
WINDOW 0 32 8 Invisible 2
WINDOW 3 61 -91 Invisible 2
WINDOW 123 0 0 Left 2
SYMATTR InstName V9
SYMATTR Value PULSE(0 400 0 0 0 1n 1 1)
SYMATTR SpiceLine Rser=0
SYMBOL sw 3040 -3008 M270
WINDOW 0 13 4 Invisible 2
SYMATTR InstName S4
SYMATTR SpiceModel SWI
SYMATTR Value ""
SYMBOL voltage 2928 -2928 M90
WINDOW 0 32 8 Invisible 2
WINDOW 3 64 -82 Invisible 2
WINDOW 123 0 0 Left 2
SYMATTR InstName V10
SYMATTR Value PULSE(0 400 0 0 0 1u 500u)
SYMATTR SpiceLine Rser=0
SYMBOL IR2110 2448 -2848 R0
WINDOW 0 16 -157 Center 2
WINDOW 3 6 64 Center 2
SYMATTR InstName U1
SYMBOL Misc\\EuropeanCap 2576 -2816 R0
WINDOW 0 24 4 Invisible 2
SYMATTR InstName C18
SYMATTR Value 2µ2
SYMATTR SpiceLine V=400 Irms=1 Lser=0
SYMBOL Misc\\EuropeanCap 2336 -2800 M0
WINDOW 0 24 4 Invisible 2
WINDOW 3 -14 7 Left 2
SYMATTR InstName C19
SYMATTR Value 10µ
SYMATTR SpiceLine V=400 Irms=1 Lser=0
SYMBOL voltage 2656 -2976 R0
WINDOW 39 0 0 Left 2
WINDOW 0 24 16 Invisible 2
WINDOW 3 24 96 Invisible 2
SYMATTR InstName V7
SYMATTR Value 5
SYMBOL nmos 2656 -2800 R0
WINDOW 0 -21 44 Invisible 2
WINDOW 3 -12 -5 Invisible 2
SYMATTR InstName M1
SYMATTR Value BSZ22DN20NS3
SYMBOL voltage 2592 -2976 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 56 Left 2
SYMATTR InstName V6
SYMATTR Value 15
SYMATTR SpiceLine Rser=0
SYMBOL Misc\\EuropeanResistor 2576 -2944 M180
WINDOW 0 31 76 Invisible 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R6
SYMATTR Value .05
SYMBOL voltage 1712 -2880 M270
WINDOW 123 0 0 Left 2
WINDOW 0 -54 49 Invisible 2
WINDOW 3 -9 55 Invisible 2
SYMATTR InstName V1
SYMATTR Value PULSE(0 .3 0 {pwm_p/2} {pwm_p/2} 0 {pwm_p})
SYMATTR SpiceLine Rser=0
SYMBOL Comparators\\LT1711 1984 -2944 R0
WINDOW 0 32 -40 Invisible 2
SYMATTR InstName U2
SYMBOL Opamps\\opamp2 1520 -3024 R0
WINDOW 3 -32 63 Left 2
SYMATTR Value lm318
SYMATTR InstName U3
SYMBOL diode 1776 -3120 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 1776 -3024 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL Misc\\EuropeanResistor 2048 -3136 M0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 1840 -2944 M270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage 1408 -2944 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 56 Left 2
WINDOW 123 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 2.5
SYMATTR SpiceLine Rser=0
SYMBOL voltage 1312 -2992 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 56 Left 2
SYMATTR InstName V3
SYMATTR Value 15
SYMATTR SpiceLine Rser=0
SYMBOL voltage 1312 -3072 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 56 Left 2
SYMATTR InstName V4
SYMATTR Value 15
SYMATTR SpiceLine Rser=0
TEXT 2736 -2768 Left 2 !.param freq                10k\n.param pulse_width     1u1\n.param pri_I               40u\n.param sec_I              60m
TEXT 2888 -2800 Left 2 !.tran 5
TEXT 2776 -3040 Left 2 !K3 L3 L2 1.0
TEXT 2384 -2896 Left 2 !.include ir2110.sub
TEXT 2712 -2776 Left 2 !.model SWI SW(Ron=1n Roff=1000G Vt=0.5 Vh=.4)
TEXT 1752 -2832 Right 2 !.param pwm_p=500n
TEXT 2352 -2656 Left 2 !.include ir2110.sub
TEXT 2352 -2632 Left 2 !.lib NE5532.sub
TEXT 2352 -2608 Left 2 !.lib LM318.sub
TEXT 2368 -2576 Left 2 !.tran 0 1m 5u
TEXT 2384 -2536 Left 2 !.inc CD4000.lib
