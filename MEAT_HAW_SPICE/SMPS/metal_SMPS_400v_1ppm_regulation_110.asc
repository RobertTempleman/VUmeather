Version 4
SHEET 1 6068 1612
WIRE 3008 -3248 2960 -3248
WIRE 2960 -3232 2960 -3248
WIRE 3008 -3232 3008 -3248
WIRE 2960 -3136 2960 -3152
WIRE 3008 -3136 3008 -3152
WIRE 3008 -3136 2960 -3136
WIRE 3408 -3088 2272 -3088
WIRE 2528 -3056 2512 -3056
WIRE 2624 -3056 2592 -3056
WIRE 2704 -3056 2624 -3056
WIRE 2816 -3056 2800 -3056
WIRE 3008 -3056 2864 -3056
WIRE 3024 -3056 3008 -3056
WIRE 3136 -3056 3104 -3056
WIRE 3200 -3056 3184 -3056
WIRE 3296 -3056 3280 -3056
WIRE 3312 -3056 3296 -3056
WIRE 3408 -3056 3408 -3088
WIRE 3408 -3056 3392 -3056
WIRE 2224 -3040 2224 -3056
WIRE 2272 -3040 2272 -3088
WIRE 2272 -3040 2224 -3040
WIRE 2592 -3040 2592 -3056
WIRE 2624 -3040 2624 -3056
WIRE 2640 -3040 2624 -3040
WIRE 3008 -3040 3008 -3056
WIRE 3184 -3040 3184 -3056
WIRE 2224 -3024 2224 -3040
WIRE 2800 -3024 2800 -3056
WIRE 2864 -3008 2864 -3056
WIRE 2880 -3008 2864 -3008
WIRE 2976 -3008 2960 -3008
WIRE 2352 -2992 2320 -2992
WIRE 2704 -2992 2704 -3056
WIRE 2112 -2976 2112 -3040
WIRE 2224 -2960 2224 -2976
WIRE 2352 -2960 2336 -2960
WIRE 2896 -2960 2880 -2960
WIRE 2960 -2960 2960 -2976
WIRE 2960 -2960 2944 -2960
WIRE 1936 -2944 1920 -2944
WIRE 2016 -2944 2000 -2944
WIRE 2112 -2944 2096 -2944
WIRE 2224 -2944 2224 -2960
WIRE 3008 -2944 3008 -2960
WIRE 3120 -2944 3008 -2944
WIRE 3296 -2944 3296 -3056
WIRE 3312 -2944 3296 -2944
WIRE 2112 -2928 2112 -2944
WIRE 2336 -2928 2336 -2960
WIRE 2880 -2928 2880 -2960
WIRE 2960 -2928 2960 -2960
WIRE 3120 -2928 3120 -2944
WIRE 3408 -2928 3408 -3056
WIRE 3408 -2928 3376 -2928
WIRE 2000 -2912 2000 -2944
WIRE 2736 -2912 2736 -3056
WIRE 2800 -2912 2800 -2944
WIRE 2816 -2912 2800 -2912
WIRE 2864 -2912 2864 -3008
WIRE 2976 -2912 2976 -3008
WIRE 3072 -2912 3040 -2912
WIRE 3136 -2912 3136 -3056
WIRE 3184 -2912 3136 -2912
WIRE 3312 -2912 3184 -2912
WIRE 2224 -2896 2208 -2896
WIRE 2864 -2896 2864 -2912
WIRE 3184 -2880 3184 -2912
WIRE 2704 -2864 2704 -2912
WIRE 2704 -2864 2560 -2864
WIRE 1840 -2848 1840 -2944
WIRE 1840 -2848 1808 -2848
WIRE 1856 -2848 1840 -2848
WIRE 3072 -2848 3072 -2912
WIRE 1936 -2832 1936 -2944
WIRE 1936 -2832 1920 -2832
WIRE 2304 -2832 2304 -2848
WIRE 2352 -2832 2304 -2832
WIRE 2592 -2832 2560 -2832
WIRE 2624 -2832 2592 -2832
WIRE 1856 -2816 1840 -2816
WIRE 2208 -2816 2160 -2816
WIRE 2592 -2816 2592 -2832
WIRE 2736 -2816 2736 -2912
WIRE 2864 -2816 2864 -2832
WIRE 2864 -2816 2736 -2816
WIRE 2976 -2816 2976 -2832
WIRE 2976 -2816 2864 -2816
WIRE 3040 -2816 3040 -2832
WIRE 3040 -2816 2976 -2816
WIRE 3120 -2816 3120 -2832
WIRE 3120 -2816 3040 -2816
WIRE 2304 -2800 2304 -2832
WIRE 2864 -2800 2864 -2816
WIRE 2160 -2784 2160 -2816
WIRE 2704 -2784 2704 -2864
WIRE 2224 -2736 2208 -2736
WIRE 2592 -2736 2592 -2752
WIRE 2592 -2736 2560 -2736
WIRE 1840 -2720 1840 -2816
WIRE 1936 -2720 1936 -2832
WIRE 1936 -2720 1920 -2720
WIRE 2592 -2720 2592 -2736
WIRE 1840 -2704 1840 -2720
WIRE 2304 -2704 2304 -2736
WIRE 2352 -2704 2304 -2704
WIRE 2656 -2704 2560 -2704
FLAG 2512 -3056 0
FLAG 2960 -2976 0
FLAG 2592 -2720 0
FLAG 2304 -2704 0
FLAG 2304 -2848 VDD
IOPIN 2304 -2848 BiDir
FLAG 2704 -2688 0
FLAG 2320 -2992 0
FLAG 2656 -2880 0
FLAG 2656 -2960 VDD
IOPIN 2656 -2960 BiDir
FLAG 2592 -2880 0
FLAG 2624 -2832 +
IOPIN 2624 -2832 BiDir
FLAG 2640 -3040 +
IOPIN 2640 -3040 BiDir
FLAG 2160 -2784 0
FLAG 2224 -2896 +op
IOPIN 2224 -2896 BiDir
FLAG 2224 -2736 -op
IOPIN 2224 -2736 BiDir
FLAG 2864 -2800 0
FLAG 3344 -2960 +op
IOPIN 3344 -2960 BiDir
FLAG 3344 -2896 -op
IOPIN 3344 -2896 BiDir
FLAG 3184 -2960 0
FLAG 3184 -2800 0
FLAG 1888 -2864 +op
IOPIN 1888 -2864 BiDir
FLAG 1888 -2800 -op
IOPIN 1888 -2800 BiDir
FLAG 1808 -2784 0
FLAG 1840 -2624 0
FLAG 2000 -2832 0
FLAG 2112 -2848 -op
IOPIN 2112 -2848 BiDir
FLAG 2960 -3136 0
SYMBOL ind2 2816 -2928 R180
WINDOW 0 36 80 Invisible 2
WINDOW 3 -49 57 Left 2
SYMATTR InstName L2
SYMATTR Value {sec_I}
SYMATTR SpiceLine Rser=.42
SYMATTR Type ind
SYMBOL diode 2800 -3040 R270
WINDOW 0 32 32 Invisible 2
WINDOW 3 0 32 Invisible 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL ind2 2688 -2896 M180
WINDOW 0 36 80 Invisible 2
WINDOW 3 -8 109 Left 2
SYMATTR InstName L3
SYMATTR Value {pri_I}
SYMATTR SpiceLine Rser=.0003
SYMATTR Type ind
SYMBOL Misc\\EuropeanCap 2528 -3072 M90
WINDOW 0 0 32 Invisible 2
WINDOW 3 -9 69 VTop 2
SYMATTR InstName C3
SYMATTR Value 8000µ
SYMATTR SpiceLine Rser=.005
SYMBOL sw 2976 -3008 M270
WINDOW 0 71 33 Invisible 2
SYMATTR InstName S3
SYMATTR SpiceModel SW2
SYMATTR Value ""
SYMBOL voltage 2976 -2928 R0
WINDOW 123 0 0 Left 2
WINDOW 0 24 16 Invisible 2
WINDOW 3 -14 57 Left 2
SYMATTR InstName V8
SYMATTR Value 402.6
SYMATTR SpiceLine Rser=0
SYMBOL voltage 2864 -2928 M90
WINDOW 0 32 8 Invisible 2
WINDOW 3 61 -91 Invisible 2
WINDOW 123 0 0 Left 2
SYMATTR InstName V9
SYMATTR Value PULSE(0 400 0 0 0 10u 1 1)
SYMATTR SpiceLine Rser=0
SYMBOL voltage 3040 -2928 R0
WINDOW 0 32 8 Invisible 2
WINDOW 3 64 -82 Invisible 2
WINDOW 123 0 0 Left 2
SYMATTR InstName V10
SYMATTR Value PULSE(0 20 250u 0 0 1u 500u)
SYMATTR SpiceLine Rser=0
SYMBOL IR2110 2448 -2848 R0
WINDOW 0 16 -157 Center 2
WINDOW 3 6 64 Center 2
SYMATTR InstName U1
SYMBOL Misc\\EuropeanCap 2576 -2816 R0
WINDOW 0 24 4 Invisible 2
SYMATTR InstName C18
SYMATTR Value 2µ2
SYMATTR SpiceLine V=400 Irms=1 Lser=0
SYMBOL Misc\\EuropeanCap 2320 -2800 M0
WINDOW 0 24 4 Invisible 2
WINDOW 3 -14 7 Left 2
SYMATTR InstName C19
SYMATTR Value 10µ
SYMATTR SpiceLine V=400 Irms=1 Lser=0
SYMBOL voltage 2656 -2976 R0
WINDOW 39 0 0 Left 2
WINDOW 0 24 16 Invisible 2
WINDOW 3 24 96 Invisible 2
SYMATTR InstName V7
SYMATTR Value 5
SYMBOL nmos 2656 -2784 R0
WINDOW 0 -21 44 Invisible 2
WINDOW 3 -12 -5 Invisible 2
SYMATTR InstName M1
SYMATTR Value BSZ22DN20NS3
SYMBOL voltage 2592 -2976 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 56 Left 2
SYMATTR InstName V6
SYMATTR Value 15
SYMATTR SpiceLine Rser=0
SYMBOL Misc\\EuropeanResistor 2576 -2944 M180
WINDOW 0 31 76 Invisible 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R6
SYMATTR Value .05
SYMBOL voltage 2208 -2832 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 56 Left 2
SYMATTR InstName V2
SYMATTR Value 15
SYMATTR SpiceLine Rser=0
SYMBOL voltage 2208 -2912 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 56 Left 2
SYMATTR InstName V1
SYMATTR Value 15
SYMATTR SpiceLine Rser=0
SYMBOL diode 2800 -2896 R270
WINDOW 0 32 32 Invisible 2
WINDOW 3 0 32 Invisible 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 2736 -3040 R270
WINDOW 0 32 32 Invisible 2
WINDOW 3 0 32 Invisible 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 2736 -2896 R270
WINDOW 0 32 32 Invisible 2
WINDOW 3 0 32 Invisible 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL Misc\\EuropeanCap 2848 -2896 R0
WINDOW 0 24 4 Invisible 2
WINDOW 3 -30 33 Left 2
SYMATTR InstName C1
SYMATTR Value 75µ
SYMATTR SpiceLine Rser=.0008
SYMBOL Opamps\\opamp2 3344 -2992 R0
WINDOW 3 -32 63 Left 2
SYMATTR Value lm318
SYMATTR InstName U2
SYMBOL Misc\\EuropeanResistor 3120 -3040 M270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 15.9Meg
SYMBOL Misc\\EuropeanResistor 3296 -3040 M270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL Misc\\EuropeanResistor 3408 -3040 M270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 1Meg
SYMBOL voltage 3184 -3056 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 56 Left 2
WINDOW 123 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 2.5
SYMATTR SpiceLine Rser=0
SYMBOL Misc\\EuropeanResistor 3200 -2896 M0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL CD4000\\CD4011B 2160 -3024 R0
WINDOW 0 -16 16 Invisible 2
WINDOW 3 -26 -6 Invisible 2
SYMATTR InstName U4
SYMBOL CD4000\\CD4011B 2272 -3024 R0
WINDOW 0 -16 16 Invisible 2
WINDOW 3 -32 113 Invisible 2
SYMATTR InstName U5
SYMBOL CD4000\\CD4011B 2176 -3104 M0
WINDOW 0 -16 16 Invisible 2
WINDOW 3 -32 113 Invisible 2
SYMATTR InstName U6
SYMBOL Misc\\EuropeanResistor 2096 -2832 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL Opamps\\opamp2 1888 -2896 R0
WINDOW 3 -32 63 Left 2
WINDOW 0 16 32 Invisible 2
SYMATTR Value lm318
SYMATTR InstName U3
SYMBOL Misc\\EuropeanResistor 1936 -2928 M270
WINDOW 0 27 56 Invisible 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 1856 -2720 M0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 1936 -2704 M270
WINDOW 0 27 56 Invisible 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL Misc\\EuropeanCap 1792 -2848 R0
WINDOW 0 24 4 Invisible 2
WINDOW 3 4 -15 Left 2
SYMATTR InstName C2
SYMATTR Value 50p
SYMATTR SpiceLine Rser=.0008
SYMBOL Misc\\EuropeanCap 2000 -2960 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100p
SYMATTR SpiceLine Rser=.0008
SYMBOL Misc\\EuropeanResistor 1984 -2816 M180
WINDOW 0 31 76 Left 2
WINDOW 3 31 40 Left 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL Misc\\EuropeanResistor 2112 -2928 M270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 2k
SYMBOL nmos 3072 -2928 R0
WINDOW 0 -21 44 Invisible 2
WINDOW 3 -12 -5 Invisible 2
SYMATTR InstName M2
SYMATTR Value IRF740
SYMBOL ind2 2992 -3056 R0
SYMATTR InstName L4
SYMATTR Value 250µH
SYMATTR Type ind
SYMATTR SpiceLine Rser=.17 Cpar=100p
SYMBOL ind2 2992 -3248 R0
SYMATTR InstName L1
SYMATTR Value .1µH
SYMATTR Type ind
SYMBOL Misc\\EuropeanResistor 2976 -3248 M0
SYMATTR InstName R2
SYMATTR Value 10k
TEXT 2656 -3200 Left 2 !.param freq                500k\n.param pulse_width     0.6u\n.param pri_I               40u\n.param sec_I              60m
TEXT 2528 -3224 Left 2 !.tran 5
TEXT 2872 -3040 Left 2 !K3 L3 L2 1.0
TEXT 2384 -2896 Left 2 !.include ir2110.sub
TEXT 2736 -2776 Left 2 !.model SWI SW(Ron=34m Roff=1000G Vt=0.5 Vh=.4)
TEXT 2528 -3176 Left 2 !.lib LM318.sub
TEXT 2736 -2760 Left 2 !.model SW2 SW(Ron=1n Roff=1000G Vt=0.5 Vh=.4)
TEXT 2528 -3208 Left 2 !.lib CD4066.sub
TEXT 2528 -3160 Left 2 !.inc CD4000.lib
TEXT 2528 -3144 Left 2 !.inc cd4066.sub
TEXT 2528 -3192 Left 2 !.lib NE5532.sub
TEXT 3048 -3120 Left 2 !K2 L1 L4 1.0
